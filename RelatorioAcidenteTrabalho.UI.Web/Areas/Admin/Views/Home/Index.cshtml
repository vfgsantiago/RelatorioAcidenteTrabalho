@model HomeAdminViewMOD
@{
    ViewData["Title"] = "Painel Administrativo";
}

<div class="container-fluid py-5 px-5">
    <div class="row mb-4">
        <div class="col-8 text-start align-content-start">
            <h1 class="display-6 text-gray-dark fw-semibold">Painel Administrativo</h1>
            <p class="text-muted fs-6">Acompanhe os indicadores e gerencie os acidentes de forma eficiente</p>
        </div>
    </div>
    <div class="row g-4 mb-4">
        <div class="col-md-3">
            <a asp-action="Index" asp-controller="Acidente" asp-area="Admin" class="text-decoration-none">
                <div class="small-box bg-primary text-white">
                    <div class="inner">
                        <h3>@Model.QtdAcidentesTotal</h3>
                        <p>Total de Acidentes</p>
                    </div>
                    <div class="icon">
                        <i class="fas fa-medkit"></i>
                    </div>
                </div>
            </a>
        </div>
        <div class="col-md-3">
            <a asp-action="Index" asp-controller="Acidentado" asp-area="Admin" class="text-decoration-none">
                <div class="small-box bg-primary text-white">
                    <div class="inner">
                        <h3>@Model.QtdAcidentadosTotal</h3>
                        <p>Total de Acidentados</p>
                    </div>
                    <div class="icon">
                        <i class="fas fa-user-injured"></i>
                    </div>
                </div>
            </a>
        </div>
        <div class="col-md-3">
            <div class="small-box bg-primary text-white">
                <div class="inner">
                    <h3>@Model.QtdMediaDiariaAcidentes</h3>
                    <p>Média Diária de Acidentes</p>
                </div>
                <div class="icon">
                    <i class="fas fa-bell"></i>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="small-box bg-primary text-white">
                <div class="inner">
                    <h3>@Model.QtdAcidentesHoje</h3>
                    <p>Acidentes Ocorridos Hoje</p>
                </div>
                <div class="icon">
                    <i class="fas fa-sun"></i>
                </div>
            </div>
        </div>
    </div>
    <div class="row g-4 mb-4">
        <div class="col-12">
            <div class="card shadow-sm border-0">
                <div class="card-header fw-semibold bg-primary-alt text-white">
                    <i class="fas fa-chart-line me-2"></i>Últimos Acidentes Registrados
                </div>
                <div class="card-body">
                    @if (Model.ListaAcidente != null && Model.ListaAcidente.Any())
                    {
                        <div class="row g-3">
                            @foreach (var item in Model.ListaAcidente)
                            {
                                {
                                    string cdAcidenteCriptografado = FuncaoCriptografia.Criptografar(item.CdAcidente.ToString());

                                    <div class="col-md-6 col-lg-4">
                                        <a asp-action="Detalhe" asp-controller="Acidente" asp-area="Admin" asp-route-a="@cdAcidenteCriptografado" class="text-decoration-none">
                                            <div class="card-ultimos-acidentes shadow-sm h-100 text-gray-dark">
                                                <div class="card-body d-flex flex-column justify-content-between">
                                                    <div class="mb-2">
                                                        <h6 class="card-title fw-bold me-2">@item.TxTitulo</h6><br />
                                                        <small class="text-gray">Registro: @item.DtRegistro.ToString("dd/MM/yyyy")</small>
                                                    </div>
                                                    <div class="mb-2">
                                                        <p class="mb-0"><strong>Acidentado:</strong> @item.TxNome</p>
                                                        <p class="mb-0"><strong>Matrícula:</strong> @item.NrMatricula</p>
                                                        <p class="mb-0"><strong>Data do Acidente:</strong> @item.DtAcidente.ToString("dd/MM/yyyy")</p>
                                                    </div>
                                                    <div class="mt-auto">
                                                        <span class="badge rounded-pill
                                                                                    @(item.CdTipoAcidente == 1 ? "bg-warning" : item.CdTipoAcidente == 2 ? "bg-danger" : "bg-orange")">
                                                            @item.TxTipoAcidente
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                }
                            }
                        </div>
                    }
                    else
                    {
                        <div class="text-center text-muted py-4">
                            Nenhum acidente encontrado.
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>

    <div class="row g-4">
        <div class="col-md-3">
            <a asp-action="Index" asp-controller="Relatorio" asp-area="Admin" class="card shadow-sm p-3 text-decoration-none text-dark document-card">
                <i class="fas fa-chart-line fa-2x mb-2"></i>
                <h5>Relatórios</h5>
                <p>Acesse relatórios detalhados do sistema.</p>
            </a>
        </div>
        <div class="col-md-3">
            <a asp-action="Index" asp-controller="Formulario" asp-area="Admin" class="card shadow-sm p-3 text-decoration-none text-dark document-card">
                <i class="fas fa-cogs fa-2x mb-2"></i>
                <h5>Parametrização de Formulários</h5>
                <p>Parametrize as perguntas dos formulários.</p>
            </a>
        </div>
        <div class="col-md-3">
            <a asp-action="Index" asp-controller="TipoAcidente" asp-area="Admin" class="card shadow-sm p-3 text-decoration-none text-dark document-card">
                <i class="fas fa-exclamation-triangle fa-2x mb-2"></i>
                <h5>Categorias de Acidentes</h5>
                <p>Gerencie os tipos de acidentes registrados.</p>
            </a>
        </div>
        <div class="col-md-3">
            <a asp-action="Index" asp-controller="Pergunta" asp-area="Admin" class="card shadow-sm p-3 text-decoration-none text-dark document-card">
                <i class="fas fa-question-circle fa-2x mb-2"></i>
                <h5>Perguntas</h5>
                <p>Gerencie perguntas e instruções do formulário.</p>
            </a>
        </div>
    </div>
</div>
